import 'package:flutter/material.dart';
import 'package:ir_sensor_plugin/ir_sensor_plugin.dart';

void main() => runApp(const MyApp());

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  static const String _title = 'RGB LED Controller';

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: _title,
      home: Scaffold(
        appBar: AppBar(title: const Text(_title)),
        body: const Center(
          child: MyStatefulWidget(),
        ),
      ),
    );
  }
}

class MyStatefulWidget extends StatefulWidget {
  const MyStatefulWidget({Key? key}) : super(key: key);

  @override
  State<MyStatefulWidget> createState() => _MyStatefulWidgetState();
}

class _MyStatefulWidgetState extends State<MyStatefulWidget> {
  CodeOption dropdownValue = CodeOption.allCodes.first;

  Future<void> transmitPattern(String codePattern) async {
    await IrSensorPlugin.transmitString(pattern: codePattern);
  }

  @override
  Widget build(BuildContext context) {
    return DropdownButton<CodeOption>(
      value: dropdownValue,
      icon: const Icon(Icons.arrow_downward),
      elevation: 16,
      style: const TextStyle(color: Colors.deepPurple),
      underline: Container(
        height: 2,
        color: Colors.deepPurpleAccent,
      ),
      onChanged: (CodeOption? newValue) {
        if (newValue != null) {
          setState(() {
            dropdownValue = newValue;
            transmitPattern(newValue.codePattern);
          });
        }
      },
      items: CodeOption.allCodes.map<DropdownMenuItem<CodeOption>>((CodeOption value) {
        return DropdownMenuItem<CodeOption>(
          value: value,
          child: Text(value.key),
        );
      }).toList(),
    );
  }
}

class CodeOption {
  final String key;
  final String codePattern;

  CodeOption(this.key, this.codePattern);

  static List<CodeOption> get allCodes => [
    CodeOption('IR24_BRIGHTER', '0000 006D 0022 0000 015B 00AE 0014 0018 0014 0016 0016 0016 0014 0018 0014 0016 0014 0018 0016 0014 0016 0016 0016 0041 0014 0043 0014 0041 0016 003F 0016 0016 0016 0041 0014 0041 0016 0041 0014 0018 0014 0016 0016 0016 0014 0018 0014 0018 0014 0016 0016 0016 0014 0016 0014 0043 0014 0043 0014 0041 0016 0041 0014 0043 0014 0041 0016 0041 0014 0043 0014 06C3'),
    CodeOption('IR24_DARKER', '0000 006D 0022 0000 015B 00AE 0016 0016 0014 0016 0014 0018 0014 0018 0014 0018 0012 0018 0014 0018 0014 0016 0014 0041 0016 0041 0014 0043 0014 0043 0014 0016 0014 0043 0014 0041 0016 0041 0016 0041 0014 0018 0014 0016 0014 0018 0012 0018 0016 0016 0014 001A 0012 0016 0014 0018 0014 0043 0014 0041 0016 003F 0016 0041 0016 0041 0016 0041 0014 0043 0014 06C3'),
    CodeOption('IR24_OFF', '0000 006D 0022 0000 015B 00AC 0018 0014 0016 0016 0016 0014 0018 0014 0016 0016 0016 0014 0016 0016 0016 0014 0018 003F 0016 0041 0016 003F 0018 003F 0016 0016 0016 003F 0018 003F 0016 0041 0016 0014 0016 0041 0016 0016 0016 0014 0016 0016 0016 0014 0018 0014 0016 0016 0016 003F 0016 0016 0016 0041 0016 003F 0016 0041 0016 003F 0018 003F 0016 0041 0016 06C3'),
    CodeOption('IR24_ON', '0000 006D 0022 0000 015B 00AC 0018 0014 0016 0016 0016 0014 0016 0016 0016 0016 0016 0014 0016 0016 0016 0014 0016 0041 0016 0041 0016 003F 0016 0041 0016 0014 0018 003F 0016 0041 0016 003F 0018 003F 0016 0041 0016 0014 0018 0014 0016 0016 0016 0014 0016 0016 0016 0014 0018 0014 0016 0016 0016 003F 0016 0041 0016 003F 0018 003F 0016 0041 0016 003F 0018 06C3'),
    CodeOption('IR24_RED', '0000 006D 0024 0000 015B 00AC 0016 0018 0012 0018 0014 0018 0008 0003 0007 001A 0014 0016 0014 0018 0014 0016 0014 0018 0014 0043 0012 0043 0014 0043 0005 0009 0008 003F 0014 0018 0014 0043 0014 0041 0014 0043 0014 0018 0014 0016 0016 003F 0016 0016 0016 0016 0014 0018 0014 0016 0016 0018 0012 0041 0016 0041 0016 0016 0014 0041 0016 0041 0014 0043 0014 0041 0014 0043 0014 06C3'),
    CodeOption('IR24_GREEN', '0000 006D 0023 0000 015B 00B0 0012 0018 0014 0016 0016 0016 0014 0016 0014 0018 0014 0018 0014 0016 0014 0016 0016 0041 0016 0041 0016 003F 0016 0043 0014 0016 0014 0043 0014 0041 0014 0043 0016 0041 0003 0005 000C 0016 0014 0043 0014 0018 0014 0016 0014 0018 0014 0016 0014 0018 0016 0016 0014 0041 0016 0016 0014 0043 0012 0043 0016 0041 0014 0041 0016 0041 0016 06C3'),
    CodeOption('IR24_BLUE', '0000 006D 0023 0000 015D 00AC 0016 0016 0014 0018 0014 0016 0014 0018 0014 0016 0014 0018 0014 0016 0016 0016 0016 0041 0007 0005 0007 0046 0010 0043 0016 003F 0016 0018 0012 0043 0014 0043 0014 0041 0016 0014 0016 0043 0014 0041 0016 0016 0014 0016 0014 0018 0014 0016 0016 0016 0016 0041 0014 0018 0014 0016 0014 0041 0016 0041 0016 0041 0014 0043 0014 0041 0014 06C3'),
    CodeOption('IR24_REDDISH', '0000 006D 0022 0000 015B 00AC 0016 0016 0016 0016 0016 0014 0016 0016 0016 0016 0016 0014 0016 0016 0016 0014 0016 0041 0016 0041 0016 003F 0016 0041 0014 0018 0016 003F 0016 0041 0016 0041 0014 0016 0016 0016 0014 0016 0016 0041 0016 0016 0016 0014 0016 0016 0014 0016 0018 003F 0016 0041 0016 003F 0016 0016 0016 0041 0016 003F 0016 0041 0016 0041 0016 06C3'),
    CodeOption('IR24_ORANGE', '0000 006D 0022 0000 015D 00AC 0016 0014 0018 0014 0016 0014 0018 0014 0018 0014 0016 0014 0018 0014 0016 0016 0016 003F 0018 003F 0016 003F 0018 003F 0018 0014 0016 003F 0018 003F 0018 003F 0016 0014 0018 0014 0016 003F 0018 003F 0018 0014 0016 0014 0018 0014 0018 0014 0016 003F 0018 003F 0016 0016 0016 0014 0018 003F 0016 003F 0018 003F 0018 003F 0016 06C3'),
    CodeOption('IR24_YELLOWISH', '0000 006D 0022 0000 015D 00AA 0018 0014 0018 0014 0016 0014 0018 0014 0016 0016 0016 0016 0016 0014 0016 0014 0018 003F 0018 003F 0016 003F 0018 003F 0016 0016 0016 003F 0018 003F 0016 003F 0018 0014 0018 0014 0016 0014 0018 0014 0018 003F 0016 0016 0016 0014 0016 0016 0016 003F 0018 003F 0016 003F 0018 003F 0018 0014 0016 0041 0016 003F 0016 0041 0016 06C3'),
    CodeOption('IR24_YELLOW', '0000 006D 0022 0000 015D 00AC 0016 0014 0018 0014 0018 0014 0016 0014 0018 0014 0016 0014 0018 0014 0016 0016 0016 003F 0018 003F 0018 003F 0016 003F 0018 0014 0016 0041 0016 003F 0018 003F 0016 0014 0018 0016 0016 003F 0016 0014 001A 003D 0018 0014 0016 0014 0018 0014 0016 003F 0018 003F 0018 0014 0016 003F 0018 0014 0018 003F 0016 003F 0018 003F 0016 06C3'),
    CodeOption('IR24_GREENISH', '0000 006D 0022 0000 015B 00AE 0014 0018 0014 0016 0014 0018 0014 0016 0016 0016 0014 0016 0016 0016 0016 0014 0016 0041 0016 0041 0016 003F 0016 0041 0014 0018 0016 0041 0014 0041 0014 0043 0014 0043 0014 0016 0014 0018 0014 0041 0016 0016 0016 0016 0014 0016 0014 0018 0014 0018 0014 0041 0016 0041 0014 0018 0014 0041 0016 0041 0014 0041 0014 0043 0014 06C3'),
    CodeOption('IR24_TURQUOISE', '0000 006D 0022 0000 015B 00AC 0016 0016 0014 0018 0014 0016 0014 0018 0014 0018 0014 0016 0016 0016 0014 0018 0012 0044 0014 0041 0014 0041 0014 0043 0014 0018 0014 0041 0016 0041 0014 0043 0014 0041 0016 0016 0014 0041 0016 0041 0016 0016 0014 0016 0016 0016 0016 0016 0014 001A 0010 0043 0014 0018 0014 0016 0016 0041 0014 0041 0016 0043 0014 0041 0014 06C3'),
    CodeOption('IR24_CYAN', '0000 006D 0023 0000 015B 00AE 0016 0016 0016 0018 0012 0018 0014 0016 0014 001A 0012 0018 0014 0016 0016 0016 0014 0043 0014 0041 0014 0041 0016 0043 0014 0016 0008 0003 0007 0046 0014 0041 0014 0041 0014 0041 0016 0018 0014 0016 0014 0018 0014 0041 0016 0016 0014 0018 0014 0016 0014 0018 0014 0041 0016 0041 0014 0041 0016 0018 0014 0041 0016 0041 0014 0043 0014 06C3'),
    CodeOption('IR24_AQUA', '0000 006D 0022 0000 0159 00B0 0012 001A 0012 0018 0014 0016 0016 0016 0014 0018 0012 0018 0016 0016 0014 0016 0016 0041 0014 0043 0014 0041 0016 0041 0014 0018 0014 0043 0014 0041 0014 0043 0014 0041 0014 0018 0014 0041 0016 0016 0014 0043 0014 0018 0014 0016 0014 0018 0014 0018 0014 0041 0014 0016 0016 0041 0014 0018 0014 0041 0014 0044 0012 0043 0014 06C3'),
    CodeOption('IR24_DEEPBLUE', '0000 006D 0022 0000 015D 00AC 0016 0016 0016 0014 0016 0018 0014 0016 0016 0014 0016 0016 0016 0014 0016 0016 0016 0041 0014 0041 0016 0041 0016 0041 0016 0016 0014 0043 0014 0041 0014 0043 0014 0016 0014 0043 0016 0014 0016 0041 0014 0016 0016 0016 0016 0016 0014 0016 0016 0041 0014 0018 0014 0041 0016 0016 0014 0043 0014 0043 0014 0041 0014 0041 0016 06C3'),
    CodeOption('IR24_PURPLE', '0000 006D 0022 0000 015B 00AE 0014 0016 0016 0018 0014 0016 0014 0016 0016 0016 0014 0018 0014 0018 0014 0016 0014 0043 0014 0043 0014 0041 0014 0041 0016 0018 0014 0041 0014 0043 0016 003F 0016 0016 0014 0041 0016 0043 0014 0041 0014 0018 0014 0018 0014 0016 0014 001A 0014 0041 0014 0016 0014 0018 0016 0014 0016 0041 0014 0043 0014 0043 0014 0041 0016 06C3'),
    CodeOption('IR24_MAGENTA', '0000 006D 0022 0000 015B 00AE 0016 0016 0016 0016 0014 0016 0014 0016 0016 0016 0016 0016 0014 0018 0014 0016 0016 0041 0016 0041 0014 0041 0014 0043 0016 0016 0014 0041 0016 0041 0016 0041 0014 0016 0016 0041 0014 0016 0016 0016 0014 0043 0014 0016 0014 0018 0016 0016 0014 0041 0014 0016 0016 0043 0014 0041 0014 0018 0014 0041 0016 0041 0014 0043 0014 06C3'),
    CodeOption('IR24_PINK', '0000 006D 0022 0000 015B 00AE 0014 0018 0014 0016 0016 0016 0014 0016 0014 0018 0014 0018 0014 0016 0014 0016 0016 0041 0014 0043 0016 0041 0014 0041 0016 0016 0016 0041 0014 0041 0016 0041 0016 0014 0016 0041 0016 003F 0016 0016 0016 0041 0016 0014 0016 0016 0014 0016 0018 003F 0016 0016 0014 0016 0016 0041 0016 0016 0016 003F 0016 0041 0014 0043 0014 06C3'),
    CodeOption('IR24_WHITE', '0000 006D 0029 0000 015B 00AC 0008 0005 0007 001A 0014 0018 0012 0018 0014 0016 0008 0003 0007 001E 0010 0018 0014 0018 0014 0016 0014 0043 0014 0043 0007 0005 0007 0043 0014 0041 0008 0003 0008 0018 0014 0043 0014 0041 0016 003F 0008 0003 0007 0046 0014 0041 0014 0043 0014 0016 0014 0018 0014 0018 0005 0009 0007 0018 0012 0018 0007 0005 0007 001A 0014 0016 0016 0016 0014 0041 0016 0041 0014 0043 0014 0043 0014 0041 0014 06C3'),
    CodeOption('IR24_FLASH', '0000 006D 0027 0000 0159 00AE 0014 001A 0012 0018 0014 0016 0016 0016 0014 0018 0012 0018 0014 0018 0014 0016 0008 0005 0007 0046 0010 0043 0014 0043 0014 0043 0012 0018 0007 0005 0005 0046 0014 0041 0014 0041 0016 0041 0014 0043 0014 0016 0014 0043 0014 0016 0016 0018 0012 0018 0014 0016 0016 0016 0014 0018 0010 0048 0007 0005 0005 001A 0005 0052 0012 0041 0008 0005 0005 0044 0014 0043 0007 0005 0007 06C3'),
    CodeOption('IR24_STROBE', '0000 006D 0023 0000 0008 0003 014F 00AE 0014 0016 0016 0016 0016 0014 0016 0016 0016 0016 0014 0016 0014 0018 0016 0016 0014 0041 0016 0043 0012 0043 0014 0043 0012 0018 0014 0043 0012 0043 0016 0041 0014 0041 0014 0044 0012 0043 0014 0041 0014 0018 0016 0016 0014 0016 0016 0016 0014 0016 0016 0016 0016 0014 0014 0018 0016 0041 0014 0043 0014 0041 0016 003F 0016 06C3'),
    CodeOption('IR24_FADE', '0000 006D 0023 0000 015B 00AC 0016 0018 0012 0018 0018 0014 0014 0016 0016 0016 0014 0016 0014 0018 0016 0016 0014 0041 0016 0043 0012 0041 0016 0041 0016 0014 0016 0041 0016 0041 0016 003F 0016 0041 0014 0043 0014 0018 0014 0018 0012 0043 0014 0016 0016 0016 0014 0018 0014 0016 0008 0003 0007 001A 0014 0041 0016 0041 0014 0018 0014 0043 0014 0041 0016 0041 0014 06C3'),
    CodeOption('IR24_SMOOTH', '0000 006D 0022 0000 015D 00AC 0014 0016 0016 0016 0016 0016 0014 0018 0014 0016 0014 0018 0014 0016 0016 0016 0016 003F 0016 0041 0014 0043 0014 0041 0016 0016 0014 0041 0016 0041 0016 0041 0014 0041 0014 0043 0016 0041 0014 0016 0016 0041 0014 0016 0016 0018 0014 0016 0014 0018 0014 0018 0014 0014 0016 0043 0014 0016 0016 003F 0016 0043 0012 0043 0014 06C3'),
  ];

  @override
  bool operator == (Object? other) => other is CodeOption && key == other.key;

  @override
  int get hashCode => 37 + key.hashCode * 39;

}
